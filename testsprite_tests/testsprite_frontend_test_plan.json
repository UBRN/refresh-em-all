[
  {
    "id": "TC001",
    "title": "Refresh all tabs across all windows",
    "description": "Verify that the extension refreshes all open tabs in every browser window when started.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Open multiple browser windows with multiple tabs each."
      },
      {
        "type": "action",
        "description": "Open extension popup and click the Start button."
      },
      {
        "type": "assertion",
        "description": "Confirm that all tabs across all windows have been refreshed successfully."
      },
      {
        "type": "assertion",
        "description": "Verify that the browser remains responsive with no crashes."
      }
    ]
  },
  {
    "id": "TC002",
    "title": "Media playback state preservation during refresh",
    "description": "Ensure media playback states including position, volume, mute status, and playback rate are preserved and restored after tab refresh.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Open tabs with video and audio elements playing various media."
      },
      {
        "type": "action",
        "description": "Modify media playback states (seek to a position, adjust volume, mute/unmute, change playback rate)."
      },
      {
        "type": "action",
        "description": "Trigger the refresh for all tabs."
      },
      {
        "type": "assertion",
        "description": "Verify media playback states are restored to the same position, volume, mute status, and playback rate after refresh."
      }
    ]
  },
  {
    "id": "TC003",
    "title": "Smart batch processing for tab refresh",
    "description": "Validate that tabs are grouped into batches with delays to prevent CPU spikes and maintain browser responsiveness.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Open a very large number of tabs across multiple browser windows."
      },
      {
        "type": "action",
        "description": "Start the refresh process via the extension popup."
      },
      {
        "type": "assertion",
        "description": "Observe batch processing occurs sequentially with configured breaks between batches."
      },
      {
        "type": "assertion",
        "description": "Verify browser remains responsive and does not crash during the entire refresh operation."
      }
    ]
  },
  {
    "id": "TC004",
    "title": "Handling of discarded tabs before refresh",
    "description": "Confirm that discarded tabs are detected and briefly activated before refreshing to ensure proper refresh.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Open tabs including some that are discarded (inactive) by the browser."
      },
      {
        "type": "action",
        "description": "Start the refresh operation on all tabs."
      },
      {
        "type": "assertion",
        "description": "Verify discarded tabs are activated briefly before being refreshed."
      },
      {
        "type": "assertion",
        "description": "Confirm those tabs refresh successfully and media states are preserved if applicable."
      }
    ]
  },
  {
    "id": "TC005",
    "title": "Error detection and exponential backoff retry mechanism",
    "description": "Test that tab refresh failures are captured, retried with exponential backoff, and errors logged and reported.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Simulate tab refresh failures on random tabs (e.g., by blocking reload)."
      },
      {
        "type": "action",
        "description": "Start refresh operation and monitor retry attempts with increasing delays."
      },
      {
        "type": "assertion",
        "description": "Verify retries occur using exponential backoff timing."
      },
      {
        "type": "assertion",
        "description": "Confirm errors are logged and user can view detailed error reports in the popup UI."
      }
    ]
  },
  {
    "id": "TC006",
    "title": "Skipping and handling of unrefreshable system pages",
    "description": "Ensure that tabs with system URLs (e.g., chrome://) are skipped during refresh and cause no errors.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Open browser system pages and normal tabs."
      },
      {
        "type": "action",
        "description": "Start the refresh operation."
      },
      {
        "type": "assertion",
        "description": "Verify refresh attempts skip system tabs such as chrome:// pages."
      },
      {
        "type": "assertion",
        "description": "Confirm no errors or failures are reported for skipped tabs."
      }
    ]
  },
  {
    "id": "TC007",
    "title": "Popup UI responsiveness and progress feedback",
    "description": "Check that the popup UI updates in real-time with progress bar, status text, individual tab status indicators, and plays confetti on success.",
    "category": "ui",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Start the refresh operation from the popup UI."
      },
      {
        "type": "assertion",
        "description": "Verify the linear progress bar updates correctly according to progress."
      },
      {
        "type": "assertion",
        "description": "Verify detailed tab statuses show success or error for each tab."
      },
      {
        "type": "assertion",
        "description": "Confirm the confetti animation plays after all batches complete successfully."
      }
    ]
  },
  {
    "id": "TC008",
    "title": "Operation history log records and display",
    "description": "Validate that the last 10 refresh operations are recorded with timestamps, success rates, and details, and can be viewed in the UI.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Perform more than 10 refresh operations successfully."
      },
      {
        "type": "action",
        "description": "Open the history log in the extension popup."
      },
      {
        "type": "assertion",
        "description": "Verify only the latest 10 operation records are listed."
      },
      {
        "type": "assertion",
        "description": "Confirm each record includes a timestamp, success rate, and clickable details."
      }
    ]
  },
  {
    "id": "TC009",
    "title": "Settings management and persistence",
    "description": "Test toggling error reporting and changing batch parameters in settings and verify that settings are saved locally and applied correctly.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Open extension settings in the popup."
      },
      {
        "type": "action",
        "description": "Toggle error reporting on and off."
      },
      {
        "type": "action",
        "description": "Change batch size and delay parameters."
      },
      {
        "type": "action",
        "description": "Close and reopen the popup."
      },
      {
        "type": "assertion",
        "description": "Verify the settings persist and apply correctly during subsequent refresh operations."
      }
    ]
  },
  {
    "id": "TC010",
    "title": "Stress test mode activation and operation",
    "description": "Verify that advanced users can activate the hidden stress test mode via multiple clicks, which runs multiple refresh cycles automatically and stops on error.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "In the extension popup, click multiple times rapidly on the Settings header."
      },
      {
        "type": "assertion",
        "description": "Confirm stress test mode is activated with relevant UI indication."
      },
      {
        "type": "action",
        "description": "Observe multiple consecutive refresh cycles running autonomously."
      },
      {
        "type": "assertion",
        "description": "Verify the process stops immediately on encountering any error."
      }
    ]
  },
  {
    "id": "TC011",
    "title": "Developer debugger detection and user warning",
    "description": "Check that the extension detects developer debugger and displays appropriate user warning in the UI.",
    "category": "ui",
    "priority": "Low",
    "steps": [
      {
        "type": "action",
        "description": "Open developer tools debugger in the browser while the extension is active."
      },
      {
        "type": "action",
        "description": "Open the extension popup."
      },
      {
        "type": "assertion",
        "description": "Verify a warning message is displayed alerting the user about debugger detection."
      }
    ]
  },
  {
    "id": "TC012",
    "title": "Extension startup and initialization validation",
    "description": "Ensure the background service worker and content scripts initialize correctly on browser start and the extension is ready for user interaction.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Restart the browser or reload the extension."
      },
      {
        "type": "assertion",
        "description": "Verify background service worker starts without errors."
      },
      {
        "type": "assertion",
        "description": "Verify content scripts are injected into pages with media elements."
      },
      {
        "type": "assertion",
        "description": "Verify the popup UI opens and displays the Start button correctly."
      }
    ]
  },
  {
    "id": "TC013",
    "title": "Error reporting opt-in functionality",
    "description": "Validate that user opt-in for error reporting is respected and error data is only sent when enabled.",
    "category": "security",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Toggle error reporting setting off."
      },
      {
        "type": "action",
        "description": "Trigger errors by simulating tab refresh failures."
      },
      {
        "type": "assertion",
        "description": "Verify no error data is sent or reported remotely."
      },
      {
        "type": "action",
        "description": "Toggle error reporting on."
      },
      {
        "type": "action",
        "description": "Trigger errors again."
      },
      {
        "type": "assertion",
        "description": "Verify error data is captured and reported."
      }
    ]
  },
  {
    "id": "TC014",
    "title": "UI display of error details and user interaction",
    "description": "Check that errors captured during refresh operations are presented clearly in the UI and user can interact with details and dismiss them.",
    "category": "ui",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Simulate tab refresh errors."
      },
      {
        "type": "action",
        "description": "Open the popup UI and navigate to the error report section."
      },
      {
        "type": "assertion",
        "description": "Verify errors are listed with relevant details (tab title, error message, retry count)."
      },
      {
        "type": "action",
        "description": "User attempts to dismiss individual error entries."
      },
      {
        "type": "assertion",
        "description": "Confirm error entries are removed from the list and no longer displayed."
      }
    ]
  },
  {
    "id": "TC015",
    "title": "Performance and stability under high load",
    "description": "Stress test the extension performance and stability by running refresh cycles with extremely high tab counts repeatedly.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Open hundreds of tabs across multiple windows including media-heavy pages."
      },
      {
        "type": "action",
        "description": "Activate stress test mode to run multiple refresh iterations automatically."
      },
      {
        "type": "assertion",
        "description": "Monitor CPU and memory usage to confirm no CPU spikes or memory leaks."
      },
      {
        "type": "assertion",
        "description": "Verify no crashes or browser slowdown occur."
      },
      {
        "type": "assertion",
        "description": "Confirm all refresh cycles complete successfully or stop promptly on error."
      }
    ]
  }
]
